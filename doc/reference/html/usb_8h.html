<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>BlueLab: usb.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">BlueLab
   &#160;<span id="projectnumber">BlueLab-7.1-Release</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_885cc87fac2d91e269af0a5a959fa5f6.html">E:</a></li><li class="navelem"><a class="el" href="dir_c7e0e8d12b42f3739b71747656f18cd0.html">work_layne</a></li><li class="navelem"><a class="el" href="dir_21e8aa1b508721822d5da9358e8a66b3.html">layne</a></li><li class="navelem"><a class="el" href="dir_e4efa088505d514b69950f8abe76ce9a.html">csr8670</a></li><li class="navelem"><a class="el" href="dir_d69a05324820a15d5f908ec5057bc420.html">tools</a></li><li class="navelem"><a class="el" href="dir_33b4f9d0a7e332b5324a4fedfd59dca5.html">include</a></li><li class="navelem"><a class="el" href="dir_d66de6a51e5a24d2d6d7ec778992ab9f.html">firmware</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">usb.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Control of USB EndPoints, and other USB related traps.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afac39dbcb0154b54652135a787ce8f41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usb__if_8h.html#a40e1aa922b6413a9f8d2547a5e015b2d">usb_attached_status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8h.html#afac39dbcb0154b54652135a787ce8f41">UsbAttachedStatus</a> (void)</td></tr>
<tr class="memdesc:afac39dbcb0154b54652135a787ce8f41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if USB connection is attached or detached.  <a href="#afac39dbcb0154b54652135a787ce8f41">More...</a><br/></td></tr>
<tr class="separator:afac39dbcb0154b54652135a787ce8f41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7584677a21af75117d4110f1fbf348e1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usb__if_8h.html#ab23ff029c416f688385b04adcb3d4d80">UsbInterface</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8h.html#a7584677a21af75117d4110f1fbf348e1">UsbAddInterface</a> (const <a class="el" href="struct_usb_codes.html">UsbCodes</a> *codes, <a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> type, const <a class="el" href="csrtypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *if_descriptor, <a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> descriptor_length)</td></tr>
<tr class="memdesc:a7584677a21af75117d4110f1fbf348e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a USB interface. See the USB2.0 spec section 9.6.5.  <a href="#a7584677a21af75117d4110f1fbf348e1">More...</a><br/></td></tr>
<tr class="separator:a7584677a21af75117d4110f1fbf348e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad37ce89088882266d0143e82a64b2aec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="csrtypes_8h.html#a5341710c15e14e51d946a5a5f14b27a6">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8h.html#ad37ce89088882266d0143e82a64b2aec">UsbAddEndPoints</a> (<a class="el" href="usb__if_8h.html#ab23ff029c416f688385b04adcb3d4d80">UsbInterface</a> interface, <a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> num_end_points, const <a class="el" href="struct_end_point_info.html">EndPointInfo</a> *end_point_info)</td></tr>
<tr class="memdesc:ad37ce89088882266d0143e82a64b2aec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds USB endpoints to the interface passed. See the USB2.0 spec section 9.6.6.  <a href="#ad37ce89088882266d0143e82a64b2aec">More...</a><br/></td></tr>
<tr class="separator:ad37ce89088882266d0143e82a64b2aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2345617bcbc067bcea4e9c1af97e58d2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="csrtypes_8h.html#a5341710c15e14e51d946a5a5f14b27a6">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8h.html#a2345617bcbc067bcea4e9c1af97e58d2">UsbAddDescriptor</a> (<a class="el" href="usb__if_8h.html#ab23ff029c416f688385b04adcb3d4d80">UsbInterface</a> interface, <a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> type, const <a class="el" href="csrtypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *descriptor, <a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> descriptor_length)</td></tr>
<tr class="memdesc:a2345617bcbc067bcea4e9c1af97e58d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a USB descriptor to an interface or endpoint.  <a href="#a2345617bcbc067bcea4e9c1af97e58d2">More...</a><br/></td></tr>
<tr class="separator:a2345617bcbc067bcea4e9c1af97e58d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9209a0a8146c2354dcd71b66e65057f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="csrtypes_8h.html#a5341710c15e14e51d946a5a5f14b27a6">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8h.html#a9209a0a8146c2354dcd71b66e65057f9">UsbAddStringDescriptor</a> (<a class="el" href="csrtypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> string_index, const <a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> *string_descriptor)</td></tr>
<tr class="memdesc:a9209a0a8146c2354dcd71b66e65057f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a USB String Descriptor. See the USB2.0 spec section 9.6.7.  <a href="#a9209a0a8146c2354dcd71b66e65057f9">More...</a><br/></td></tr>
<tr class="separator:a9209a0a8146c2354dcd71b66e65057f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4830212525db574ad5a789e4c72460b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="csrtypes_8h.html#a5341710c15e14e51d946a5a5f14b27a6">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8h.html#a4830212525db574ad5a789e4c72460b5">UsbAddInterfaceAssociationDescriptor</a> (<a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> if_num, const <a class="el" href="csrtypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *ia_descriptor, <a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> descriptor_length)</td></tr>
<tr class="memdesc:a4830212525db574ad5a789e4c72460b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an Interface Association Descriptor to a USB interface.  <a href="#a4830212525db574ad5a789e4c72460b5">More...</a><br/></td></tr>
<tr class="separator:a4830212525db574ad5a789e4c72460b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af27dec9d7043ae8af0967d69fbeff7e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8h.html#af27dec9d7043ae8af0967d69fbeff7e8">UsbAddDfuInterface</a> (void)</td></tr>
<tr class="memdesc:af27dec9d7043ae8af0967d69fbeff7e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a DFU interface to the USB port.  <a href="#af27dec9d7043ae8af0967d69fbeff7e8">More...</a><br/></td></tr>
<tr class="separator:af27dec9d7043ae8af0967d69fbeff7e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3638736a761b4611d985645acd119cca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8h.html#a3638736a761b4611d985645acd119cca">UsbAddConfiguration</a> (const <a class="el" href="struct_config_descriptor_info.html">ConfigDescriptorInfo</a> *desc_info)</td></tr>
<tr class="memdesc:a3638736a761b4611d985645acd119cca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an additional USB configuration.  <a href="#a3638736a761b4611d985645acd119cca">More...</a><br/></td></tr>
<tr class="separator:a3638736a761b4611d985645acd119cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e8544c1cf28ee309fd220980f483a75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="usb__if_8h.html#a7127ac2a46b577f2aa1bb9a650e62a3f">usb_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="usb_8h.html#a0e8544c1cf28ee309fd220980f483a75">UsbDeviceState</a> (void)</td></tr>
<tr class="memdesc:a0e8544c1cf28ee309fd220980f483a75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the state of the USB device.  <a href="#a0e8544c1cf28ee309fd220980f483a75">More...</a><br/></td></tr>
<tr class="separator:a0e8544c1cf28ee309fd220980f483a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Control of USB EndPoints, and other USB related traps. </p>
<p>Bluelab applications have access to the on-chip USB interface. USB devices communications occur through channels known as endpoints. The USB specification defines a number of USB device classes through Class Specifications. Each of the Class Specifications define the type and direction of endpoints required to comply with that particular device class. Examples include the Human Interface Device (HID) class, and the Communication Device Class (CDC).</p>
<p>In addition to the documentation provided here, the USB2.0 specification and the "Bluetooth and USB Design Considerations" document available from www.csrsupport.com are useful sources of information. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="afac39dbcb0154b54652135a787ce8f41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usb__if_8h.html#a40e1aa922b6413a9f8d2547a5e015b2d">usb_attached_status</a> UsbAttachedStatus </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if USB connection is attached or detached. </p>
<dl class="section return"><dt>Returns</dt><dd>A value to indicate whether the USB connection is currently attached or detached. If USB charger detection is enabled then, if attached, the value returned will give information as to the type of device you are attached to (for example, a standard host/hub or a dedicated charger).</dd></dl>
<p>Consult the USB battery charging specification available at www.usb.org for more details on the difference between a dedicated charger and a standard host.</p>
<p>Note that BlueCore will only report a correct AttachedStatus if PSKEY_USB_PIO_VBUS is set correctly and either a PIO or the internal battery charger (if available) is connected to the USB VBUS pin. </p>

</div>
</div>
<a class="anchor" id="a7584677a21af75117d4110f1fbf348e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usb__if_8h.html#ab23ff029c416f688385b04adcb3d4d80">UsbInterface</a> UsbAddInterface </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_usb_codes.html">UsbCodes</a> *&#160;</td>
          <td class="paramname"><em>codes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="csrtypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *&#160;</td>
          <td class="paramname"><em>if_descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>descriptor_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a USB interface. See the USB2.0 spec section 9.6.5. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">codes</td><td>Defines the USB class, sub-class and protocol. </td></tr>
    <tr><td class="paramname">type</td><td>Defines the class specific descriptor type. </td></tr>
    <tr><td class="paramname">if_descriptor</td><td>Points to the class specific descriptor. </td></tr>
    <tr><td class="paramname">descriptor_length</td><td>The length in bytes of if_descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An interface number on success, else returns usb_interface_error. Possible reasons for usb_interface_error include insufficient pmalloc space for new firmware data structures, BlueCore is already enumerated on the bus, PSKEY_HOST_INTERFACE is not set to USB or PSKEY_USB_VM_CONTROL is FALSE, invalid combination of "descriptor_length" and "type" field.</dd></dl>
<p>This API is used to register both the USB interface descriptor details, and any class specific descriptors to be returned to the host.</p>
<p>If there are no class specific descriptors then the type, if_descriptor, and descriptor_length parameters must be set to 0, NULL, 0 respectively. Otherwise, usb_interface_error is returned. </p>

</div>
</div>
<a class="anchor" id="ad37ce89088882266d0143e82a64b2aec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="csrtypes_8h.html#a5341710c15e14e51d946a5a5f14b27a6">bool</a> UsbAddEndPoints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__if_8h.html#ab23ff029c416f688385b04adcb3d4d80">UsbInterface</a>&#160;</td>
          <td class="paramname"><em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>num_end_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_end_point_info.html">EndPointInfo</a> *&#160;</td>
          <td class="paramname"><em>end_point_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds USB endpoints to the interface passed. See the USB2.0 spec section 9.6.6. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interface</td><td>The interface to add endpoints to (returned by a call to <a class="el" href="usb_8h.html#a7584677a21af75117d4110f1fbf348e1" title="Adds a USB interface. See the USB2.0 spec section 9.6.5. ">UsbAddInterface()</a>). </td></tr>
    <tr><td class="paramname">num_end_points</td><td>The number of endpoints to be added. </td></tr>
    <tr><td class="paramname">end_point_info</td><td>Points to an array of endpoint definitions.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the endpoints were successfully added, else FALSE. Possible reasons for a FALSE return value include an invalid "interface" parameter, insufficient pmalloc space for new firmware data structures, BlueCore is already enumerated on the bus, PSKEY_HOST_INTERFACE is not set to USB or PSKEY_USB_VM_CONTROL is FALSE. </dd></dl>

</div>
</div>
<a class="anchor" id="a2345617bcbc067bcea4e9c1af97e58d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="csrtypes_8h.html#a5341710c15e14e51d946a5a5f14b27a6">bool</a> UsbAddDescriptor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="usb__if_8h.html#ab23ff029c416f688385b04adcb3d4d80">UsbInterface</a>&#160;</td>
          <td class="paramname"><em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="csrtypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *&#160;</td>
          <td class="paramname"><em>descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>descriptor_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a USB descriptor to an interface or endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">interface</td><td>The interface to add the descriptor to. </td></tr>
    <tr><td class="paramname">type</td><td>Descriptor type (lower 8 bits). </td></tr>
    <tr><td class="paramname">descriptor</td><td>Pointer to the descriptor to add. </td></tr>
    <tr><td class="paramname">descriptor_length</td><td>The length of the descriptor in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the descriptor was successfully added, else FALSE.</dd></dl>
<p>Descriptor type for a class specific endpoint descriptor will contain the address of the endpoint in the upper 8 bits. The upper 8 bits should be 0 otherwise.</p>
<p>This API is normally used to add HID report or class specific endpoint descriptors. </p>

</div>
</div>
<a class="anchor" id="a9209a0a8146c2354dcd71b66e65057f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="csrtypes_8h.html#a5341710c15e14e51d946a5a5f14b27a6">bool</a> UsbAddStringDescriptor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="csrtypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>string_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> *&#160;</td>
          <td class="paramname"><em>string_descriptor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a USB String Descriptor. See the USB2.0 spec section 9.6.7. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string_index</td><td>The USB String Descriptor number. Only index in the range 5 to 255 can be used as 1 to 4 are reserved. </td></tr>
    <tr><td class="paramname">string_descriptor</td><td>A pointer to the string descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the descriptor was added, else FALSE. A FALSE value will be returned if an invalid string_index parameter is given.</dd></dl>
<p>The string_descriptor passed is in UTF16 format and MUST be NUL terminated. The NUL terminator will not be passed to USB host as part of the string descriptor when a string descriptor request is received, it is simply to denote the end of the string.</p>
<p>Example: In order to register string descriptor 11 as "Test".</p>
<p>const uint16 myStringDescriptor[] = {((uint16)'T'), ((uint16)'e'), ((uint16)'s'), ((uint16)'t'), ((uint16)'\0')}; UsbAddStringDescriptor(11, myStringDescriptor); </p>

</div>
</div>
<a class="anchor" id="a4830212525db574ad5a789e4c72460b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="csrtypes_8h.html#a5341710c15e14e51d946a5a5f14b27a6">bool</a> UsbAddInterfaceAssociationDescriptor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>if_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="csrtypes_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> *&#160;</td>
          <td class="paramname"><em>ia_descriptor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td>
          <td class="paramname"><em>descriptor_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an Interface Association Descriptor to a USB interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">if_num</td><td>The interface number returned by a call to <a class="el" href="usb_8h.html#a7584677a21af75117d4110f1fbf348e1" title="Adds a USB interface. See the USB2.0 spec section 9.6.5. ">UsbAddInterface()</a> </td></tr>
    <tr><td class="paramname">ia_descriptor</td><td>A pointer to the Interface Association descriptor in VM address space </td></tr>
    <tr><td class="paramname">descriptor_length</td><td>The length of the Interface Association descriptor pointed to by ia_descriptor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TRUE if the Interface Association descriptor was added correctly, else FALSE. A FALSE value will be returned if an invalid if_num is given. </dd></dl>

</div>
</div>
<a class="anchor" id="af27dec9d7043ae8af0967d69fbeff7e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UsbAddDfuInterface </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a DFU interface to the USB port. </p>

</div>
</div>
<a class="anchor" id="a3638736a761b4611d985645acd119cca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="csrtypes_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> UsbAddConfiguration </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_config_descriptor_info.html">ConfigDescriptorInfo</a> *&#160;</td>
          <td class="paramname"><em>desc_info</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates an additional USB configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">desc_info</td><td>Points to info for the new configuration descriptor.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns a value corresponding to the bConfigurationValue of the new configuration. This will start at 2 for the first extra configuration created. On error, returns zero. Possible reasons for an error include calling the function after interfaces have been added, insufficient pmalloc space for new firmware data structures, BlueCore is already enumerated on the bus, PSKEY_HOST_INTERFACE is not set to USB or PSKEY_USB_VM_CONTROL is FALSE.</dd></dl>
<p>All devices initially have one configuration (with iConfiguration, bmAttributes and bMaxPower in the configuration descriptor being provided by pskeys), and for most devices one configuration is all you want. However, if desired, this function can be used to create additional configurations. It will add a new configuration each time it is called, it can be called repeatedly, but must be called before any interfaces have been added. The support for multiple configurations is limited in that the interfaces/endpoints have to be the same for all configurations, the only values that can be different are the iConfiguration, bmAttributes and bMaxPower fields in the configuration descriptor. For the new configuration, these values are provided by the members of 'desc_info'. Each member of 'desc_info' can be set to the special value SAME_AS_FIRST_CONFIG in which case the corresponding entry in the configuration descriptor for the new configuration will just be copied over from the first configuration. </p>

</div>
</div>
<a class="anchor" id="a0e8544c1cf28ee309fd220980f483a75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="usb__if_8h.html#a7127ac2a46b577f2aa1bb9a650e62a3f">usb_device_state</a> UsbDeviceState </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine the state of the USB device. </p>
<dl class="section return"><dt>Returns</dt><dd>The current state of the USB device from <a class="el" href="usb__if_8h.html#a7127ac2a46b577f2aa1bb9a650e62a3f" title="Type reported by trap UsbDeviceState(void). The set of possible USB device states described by table ...">usb_device_state</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Sep 2 2019 10:47:44 for BlueLab by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
